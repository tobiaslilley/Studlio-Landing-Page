<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STUDL.IO - Do What Works</title>
    <meta name="description" content="STUDL.IO - The ultimate learning companion app for students. Organize, track, and excel in your studies.">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="Assets/Website-Favicon-Color.svg">
    
    <!-- Preload fonts for better performance -->
    <link rel="preload" href="Assets/Sanger.ttf" as="font" type="font/ttf" crossorigin>
    <link rel="preload" href="Assets/Cartograph-Sans-Light.ttf" as="font" type="font/ttf" crossorigin>
    
    <!-- CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="Assets/Title-Only-Transparent.png" alt="STUDL.IO" class="nav-logo-img">
            </div>
            <div class="nav-links">
                <a href="#features">Features</a>
                <a href="#download">Download</a>
                <a href="#contact">Contact</a>
                <a href="protocols.html">Protocols</a>
                <a href="health-metrics.html">Health Metrics</a>
            </div>
        </div>
    </nav>

    <!-- Development Status Banner -->
    <div class="dev-banner">
        <div class="container">
            <p>ðŸš§ <strong>Coming Soon!</strong> STUDL.IO is currently in development and will be available soon. Stay tuned for updates!</p>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-container">
            <div class="hero-content">
                <h1 class="hero-title">Your Personal Health Protocol Manager</h1>
                <p class="hero-subtitle">Transform your health optimization journey with Biohack - the intelligent iOS app that helps you track, manage, and optimize your biohacking protocols. Whether you're experimenting with supplements, tracking biomarkers, or monitoring lifestyle interventions, STUDL.IO provides the tools you need to measure what matters.</p>
                <div class="hero-buttons">
                    <a href="#download" class="btn btn-primary disabled">Coming Soon</a>
                    <a href="#features" class="btn btn-secondary">Learn More</a>
                </div>
                <div class="hero-database-button">
                    <a href="protocols.html" class="btn btn-database">Explore STUDL.IO Biohacking Database</a>
                </div>
            </div>
            <div class="hero-image">
                <img src="Assets/Logo-Only-Transparent.png" alt="STUDL.IO App" class="hero-logo">
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="features">
        <div class="container">
            <h2 class="section-title">Why Choose STUDL.IO?</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">ðŸ”¬</div>
                    <h3 class="feature-title">Protocol Management</h3>
                    <p class="feature-description">Design your own protocols with specific metrics, dosages, and tracking parameters. Access pre-built protocols from the cloud, covering supplements, lifestyle interventions, and biomarker tracking. Organize protocols by type for easy management and toggle activation with tracking.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ðŸ“Š</div>
                    <h3 class="feature-title">Health Data Integration</h3>
                    <p class="feature-description">Automatic integration with Apple health metrics including heart rate, sleep, steps, blood pressure, and more. See your latest health data alongside active protocols with real-time monitoring and historical trend analysis.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ðŸ“ˆ</div>
                    <h3 class="feature-title">Progress Tracking & Analytics</h3>
                    <p class="feature-description">Beautiful, interactive charts showing your health metrics over time. See how your protocols correlate with health improvements and identify patterns to optimize your biohacking approach.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ðŸ”„</div>
                    <h3 class="feature-title">Smart Data Management</h3>
                    <p class="feature-description">Your protocols and data sync across devices from the cloud with offline capability. Your health data stays on your device - we only sync protocol definitions with automatic updates.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">âœ¨</div>
                    <h3 class="feature-title">User Experience</h3>
                    <p class="feature-description">Clean, modern design that makes protocol management effortless. Activate/deactivate protocols with a single tap, find protocols quickly with powerful search and category filtering, and get guided setup.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ðŸ”’</div>
                    <h3 class="feature-title">Privacy & Security</h3>
                    <p class="feature-description">Direct connection to Apple Health ensures data privacy. Health metrics are processed locally on your device with secure Supabase-powered authentication and transparent data usage policies.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Download Section -->
    <section id="download" class="download">
        <div class="container">
            <div class="download-content">
                <h2 class="section-title">Coming Soon to iPhone</h2>
                <p class="download-subtitle">STUDL.IO is currently in development and will be available on iOS.</p>
                <div class="download-buttons">
                    <a href="#" class="btn btn-primary btn-large disabled">Coming Soon - iOS</a>
                </div>
                <p class="download-note">ðŸš§ Currently in development - Launch date TBA</p>
            </div>
        </div>
    </section>


    <!-- Contact Section -->
    <section id="contact" class="contact">
        <div class="container">
            <h2 class="section-title">Get in Touch</h2>
            <p class="contact-subtitle">Have questions or feedback? We'd love to hear from you!</p>
            <div class="contact-info">
                <div class="contact-item">
                    <h3>Email</h3>
                    <p><a href="mailto:studlio@proton.me">studlio@proton.me</a></p>
                </div>
                <div class="contact-item">
                    <h3>Follow Us</h3>
                    <p><a href="https://x.com/studl_io" target="_blank" rel="noopener noreferrer">@studl_io on X</a></p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="Assets/Title-Only-Transparent.png" alt="STUDL.IO" class="footer-logo-img">
                </div>
                <div class="footer-links">
                    <a href="#features">Features</a>
                    <a href="#download">Download</a>
                    <a href="#contact">Contact</a>
                    <a href="protocols.html">Protocols</a>
                    <a href="health-metrics.html">Health Metrics</a>
                    <a href="admin.html">Admin</a>
                    <a href="privacy-policy.html">Privacy Policy</a>
                    <a href="terms-of-service.html">Terms of Service</a>
                    <a href="https://x.com/studl_io" target="_blank" rel="noopener noreferrer">Follow on X</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 STUDL.IO. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Twitter Widget Script -->
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    
    <!-- Supabase -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <script>
        // Supabase configuration
        const SUPABASE_URL = 'https://htizxlmrzfehvpupvwbn.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh0aXp4bG1yemZlaHZwdXB2d2JuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxMTY3NDEsImV4cCI6MjA3MTY5Mjc0MX0.pBC8d5zXG6DZeU3atMZEqOgY4WG8Mh7T0m2tVk5CcUY';
        
        // Initialize Supabase client
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        
        // Handle magic link authentication on homepage
        document.addEventListener('DOMContentLoaded', async () => {
            await handleMagicLinkAuth();
            await checkAuthStatus();
        });
        
        // Handle magic link authentication
        async function handleMagicLinkAuth() {
            try {
                // Check if there are auth parameters in the URL
                const urlParams = new URLSearchParams(window.location.search);
                const accessToken = urlParams.get('access_token');
                const refreshToken = urlParams.get('refresh_token');
                const type = urlParams.get('type');
                
                if (accessToken && refreshToken && type === 'magiclink') {
                    // Set the session with the tokens from the URL
                    const { data, error } = await supabase.auth.setSession({
                        access_token: accessToken,
                        refresh_token: refreshToken
                    });
                    
                    if (error) {
                        console.error('Error setting session:', error);
                    } else if (data.session) {
                        // Clear the URL parameters
                        window.history.replaceState({}, document.title, window.location.pathname);
                        // Show success message
                        showAuthMessage('Successfully signed in!', 'success');
                    }
                }
            } catch (error) {
                console.error('Error handling magic link auth:', error);
            }
        }
        
        // Check authentication status
        async function checkAuthStatus() {
            try {
                const { data: { session } } = await supabase.auth.getSession();
                
                if (session) {
                    updateNavForLoggedInUser();
                }
            } catch (error) {
                console.error('Error checking auth status:', error);
            }
        }
        
        // Update navigation for logged in user
        function updateNavForLoggedInUser() {
            const adminLink = document.querySelector('footer a[href="admin.html"]');
            if (adminLink) {
                adminLink.textContent = 'Admin Dashboard';
                adminLink.style.color = '#28a745';
                adminLink.style.fontWeight = '600';
            }
        }
        
        // Show authentication message
        function showAuthMessage(message, type) {
            const banner = document.createElement('div');
            banner.style.cssText = `
                position: fixed;
                top: 60px;
                left: 50%;
                transform: translateX(-50%);
                background: ${type === 'success' ? '#28a745' : '#dc3545'};
                color: white;
                padding: 1rem 2rem;
                border-radius: 10px;
                z-index: 1001;
                font-weight: 500;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            `;
            banner.textContent = message;
            document.body.appendChild(banner);
            
            // Remove after 3 seconds
            setTimeout(() => {
                banner.remove();
            }, 3000);
        }
        
        // Listen for auth state changes
        supabase.auth.onAuthStateChange((event, session) => {
            if (event === 'SIGNED_IN' && session) {
                updateNavForLoggedInUser();
            } else if (event === 'SIGNED_OUT') {
                // Reset nav if needed
                const adminLink = document.querySelector('footer a[href="admin.html"]');
                if (adminLink) {
                    adminLink.textContent = 'Admin';
                    adminLink.style.color = '';
                    adminLink.style.fontWeight = '';
                }
            }
        });
    </script>
</body>
</html>
